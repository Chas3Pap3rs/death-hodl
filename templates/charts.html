{% extends 'base.html' %}

{% block title %}
Crypto Charts
{% endblock title %}

{% block content %}
  

<div>
  <h1>Bitcoin Price Chart (USD)</h1>
  <canvas id="myChart"></canvas>
</div>

<script>
  window.onload = function() {
    var price_data = {{ price_data|safe }};

    var ctx = document.getElementById('myChart').getContext('2d');
    var chart = new Chart(ctx, {
        type: 'line', // Choose your desired chart type
        data: {
            labels: [],
            datasets: [{
                label: 'Bitcoin Price (USD)',
                data: [],
                backgroundColor: 'rgba(255, 99, 132, 0.2)',
                borderColor: 'rgba(255, 99, 132, 1)',
                borderWidth: 1
            }]
        },
        options: {
            // Customize chart options (e.g., scales, legend)
        }
    });

    // Loop through price_data to populate labels and data arrays
    let labels = [];
    let dataPoints = [];
    for (let item of price_data) {
        labels.push(new Date(item[0]).toLocaleDateString()); // Format dates
        dataPoints.push(item[1]); // Assuming prices are at index 1
    }
    chart.data.labels = labels;
    chart.data.datasets[0].data = dataPoints;
    chart.update();
  }
</script>


{% endblock %}