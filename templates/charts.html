{% extends 'base.html' %}
{% block title %}
Crypto Charts
{% endblock title %}


{% comment %} <head>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>

    <div id='crypto-chart-container'>
        <h1>Crypto Charts</h1>
    {{ plot_div|safe }}
</div>  {% endcomment %}




<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<div id='crypto-chart-container'></div>
<script>
var data = {{ data|safe }};
var trace = {
  x: data.map(row => row.timestamp),
  close: data.map(row => row.close),
  high: data.map(row => row.high),
  low: data.map(row => row.low),
  open: data.map(row => row.open),

  increasing: {line: {color: 'blue'}},
  decreasing: {line: {color: 'grey'}},

  type: 'candlestick',
  xaxis: 'x',
  yaxis: 'y'
};

var layout = {
  dragmode: 'zoom',
  showlegend: false,
  xaxis: {
    rangeslider: {
       visible: false
    }
  }
};

Plotly.newPlot('crypto-chart-container', [trace], layout);
</script>